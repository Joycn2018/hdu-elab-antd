<div nz-row>
  <h1>预约管理</h1>
</div>
<div nz-row>
  <div nz-col [nzSpan]="22">
    <p>当前学期：2017学年第一学期（本周为第11周）</p>
  </div>
  <div nz-col [nzSpan]="1" style="margin-left: -2em">
    <button nz-button [nzType]="'primary'" [nzSize]="'large'">
      <span>查询历史预约</span>
    </button>
  </div>
</div>
<div nz-row class="mycard" [nzType]="'flex'" [nzJustify]="'center'" [nzAlign]="'middle'">
  <div nz-col [nzSpan]="8">
    <p>我的预约课程</p>
    <p>{{orders.length}}个课程</p>
  </div>
  <div nz-col class="se"  [nzSpan]="8">
    <p>当前已预约学时</p>
    <p>{{this.getAllHour(orders)}}个学时</p>
  </div>
  <div nz-col  [nzSpan]="8">
    <p>当前待通过预约数</p>
    <p>{{UnfinishOrder.length}}个预约</p>
  </div>
</div>
<div nz-row>
  <div nz-col [nzSpan]="14">
    <h2>预约列表</h2>
  </div>
  <div nz-col [nzSpan]="6" class="mbg">
    <nz-radio-group  [(ngModel)]="choice" style="margin-right: 1em">
      <label nz-radio-button [nzValue]="100" ><span>全部</span></label>
      <label nz-radio-button [nzValue]="50"><span>进行中</span></label>
      <label nz-radio-button [nzValue]="0"><span>未开始</span></label>
    </nz-radio-group>
  </div>
  <div nz-col [nzSpan]="3" class="sousuo">
    <nz-input [nzType]="'search'" [nzPlaceHolder]="'请输入'"
    [(ngModel)]="_value" style="width: 200px;margin-left: -2em" (nzOnSearch)="onSearch($event)">
    </nz-input>
  </div>
</div>
<br><br>
<div nz-row>
  <div nz-col>
    <nz-table #nzTable [nzDataSource]="orders" [nzPageSize]="5" nzShowSizeChange [nzTotal]="orders.length" nzShowTotal="true">
      <thead nz-thead>
      <tr>
        <th nz-th><span>编号</span></th>
        <th nz-th [nzWidth]="'17%'"><span>课程名称</span></th>
        <th nz-th [nzWidth]="'21%'"><span>课程号</span></th>
        <th nz-th><span>人数</span></th>
        <th nz-th><span>已预约学时</span></th>
        <th nz-th><span>预约提交时间</span></th>
        <th nz-th><span>进度</span></th>
        <th nz-th><span>操作</span></th>
      </tr>
      </thead>
      <tbody nz-tbody *ngFor="let data of nzTable.data">
      <tr nz-tbody-tr >
        <td nz-td>{{data.id}}</td>
        <td nz-td>
          <a (click)="this.goToDetail(data)">{{data.className}}</a>
          <br>
          <span>{{data.orderDetails[0].orderWeek}}周</span>
          <br>
          <span>星期{{this.getDayByNum(data.orderDetails[0].weekDays)}}      {{data.orderDetails[0].classNum}}节</span>
        </td>
        <td nz-td>{{data.classId}}</td>
        <td nz-td>{{data.classPeoCount}}</td>
        <td nz-td>{{this.getHour(data.orderDetails)}}</td>
        <td nz-td>{{data.lastModify}}</td>
        <td nz-td>{{data.passFlagString}}</td>
        <td nz-td>
            <span>
              <a href="">删除</a>
            </span>
        </td>
      </tr>
      <tr nz-tbody-tr *ngIf="data.orderDetails.length>1">
        <td nz-td>{{data.id}}</td>
        <td nz-td>
          <a (click)="this.goToDetail(data)">{{data.className}}</a>
          <br>
          <span>{{data.orderDetails[1].orderWeek}}周</span>
          <br>
          <span>星期{{this.getDayByNum(data.orderDetails[1].weekDays)}}      {{data.orderDetails[1].classNum}}节</span>
        </td>
        <td nz-td>{{data.classId}}</td>
        <td nz-td>{{data.classPeoCount}}</td>
        <td nz-td>{{this.getHour(data.orderDetails)}}</td>
        <td nz-td>{{data.lastModify}}</td>
        <td nz-td>{{data.passFlagString}}</td>
        <td nz-td>
            <span>
              <a href="">删除</a>
            </span>
        </td>
      </tr>
      </tbody>
    </nz-table>
  </div>
</div>